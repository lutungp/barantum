(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60c4f068"],{"07ac":function(t,e,i){var r=i("23e7"),a=i("6f53").values;r({target:"Object",stat:!0},{values:function(t){return a(t)}})},"4fad":function(t,e,i){var r=i("23e7"),a=i("6f53").entries;r({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"6f53":function(t,e,i){var r=i("83ab"),a=i("df75"),n=i("fc6a"),o=i("d1e7").f,s=function(t){return function(e){var i,s=n(e),c=a(s),l=c.length,u=0,d=[];while(l>u)i=c[u++],r&&!o.call(s,i)||d.push(t?[i,s[i]]:s[i]);return d}};t.exports={entries:s(!0),values:s(!1)}},"972c":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleCreate}},[t._v(" New Activity ")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.dataList,border:""}},[i("el-table-column",{attrs:{align:"center",label:"Activity Number",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.activity_no)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"Date",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.activity_tgl)+" ")]}}])}),i("el-table-column",{attrs:{align:"header-center",label:"Activity Description"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.activity_deskripsi)+" ")]}}])}),i("el-table-column",{attrs:{align:"header-center",label:"User Name"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.name)+" ")]}}])}),i("el-table-column",{attrs:{align:"header-center",label:"Stats"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.activity_status)+" ")]}}])}),i("el-table-column",{attrs:{align:"center",label:"Operations"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.handleEdit(e)}}},[t._v(" Edit ")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.handleDelete(e)}}},[t._v(" Delete ")])]}}])})],1),i("div",{staticClass:"block bottom-static"},[i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.dataListTotal}})],1),i("el-dialog",{attrs:{visible:t.dialogVisible,title:"Edit"===t.dialogType?"Edit Activity":"New Activity"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"submitForm",attrs:{model:t.form,"label-width":"150px","label-position":"left",rules:t.rules}},[i("el-form-item",{attrs:{label:"Activity Number"}},[i("el-input",{attrs:{readonly:""},model:{value:t.form.activity_no,callback:function(e){t.$set(t.form,"activity_no",e)},expression:"form.activity_no"}})],1),i("el-form-item",{attrs:{label:"Date",prop:"activity_tgl",error:t.getErrorForField("activity_tgl",t.errors),required:""}},[i("el-date-picker",{attrs:{type:"datetime",format:"dd-MM-yyyy HH:mm:ss","value-format":"dd-MM-yyyy HH:mm:ss",placeholder:"Select date and time"},model:{value:t.form.activity_tgl,callback:function(e){t.$set(t.form,"activity_tgl",e)},expression:"form.activity_tgl"}})],1),i("el-form-item",{attrs:{label:"Customer",prop:"m_user_id",error:t.getErrorForField("m_user_id",t.errors),required:""}},[i("el-select",{attrs:{filterable:"",remote:"",placeholder:"Please enter a keyword","remote-method":t.remoteMethod,loading:t.loadingUsers},on:{change:t.selectUser},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},t._l(t.optionsUser,(function(t){return i("el-option",{key:t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1),i("el-form-item",{attrs:{label:"Description",prop:"activity_deskripsi",error:t.getErrorForField("activity_deskripsi",t.errors),required:""}},[i("el-input",{attrs:{placeholder:"Description"},model:{value:t.form.activity_deskripsi,callback:function(e){t.$set(t.form,"activity_deskripsi",e)},expression:"form.activity_deskripsi"}})],1)],1),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Tutup ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmActivity}},[t._v(" Simpan ")])],1)],1)],1)},a=[],n=i("1da1"),o=(i("96cf"),i("b0c0"),i("4fad"),i("159b"),i("07ac"),i("99af"),i("4de4"),i("ca41")),s=i("c24f"),c={data:function(){return{loading:!1,dataList:[],dataListTotal:0,form:{activity_id:0,activity_no:"",activity_deskripsi:"",activity_tgl:new Date,m_user_id:null,name:""},dialogVisible:!1,dialogType:"New",rules:{activity_tgl:[{required:!0,message:"Date cannot be empty",trigger:"blur"}],activity_deskripsi:[{required:!0,message:"Description cannot be empty",trigger:"blur"},{min:10,max:100,message:"Description of at least 10 characters",trigger:"blur"}],m_user_id:[{required:!0,message:"Customer cannot be empty",trigger:"blur"}]},errors:[],loadingUsers:!1,optionsUser:[]}},created:function(){this.getActivity()},methods:{getActivity:function(){var t=this;this.loading=!0,Object(o["d"])().then((function(e){t.dataList=e.activity,t.dataListTotal=e.total,t.loading=!1}))},getUser:function(t){var e=this;this.loadingUsers=!0,Object(s["e"])({filter:t,role:"CUSTOMER"}).then((function(t){e.optionsUser=t.users,e.loadingUsers=!1}))},reset:function(){this.form={activity_id:0,activity_no:"",activity_deskripsi:"",activity_tgl:new Date,m_user_id:null,name:""}},handleCreate:function(){this.dialogType="New",this.dialogVisible=!0,this.reset()},validateForm:function(){var t=!1,e=this.$refs["submitForm"];return e.validate((function(e){t=e})),t},handleEdit:function(t){this.dialogType="Edit",this.dialogVisible=!0,this.reset(),this.form={activity_id:t.row.activity_id,activity_no:t.row.activity_no,activity_deskripsi:t.row.activity_deskripsi,activity_tgl:t.row.activity_tgl,m_user_id:t.row.m_user_id,name:t.row.name}},handleDelete:function(t){var e=this,i=(t.$index,t.row);e.$confirm("Confirm to remove the user?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(o["c"])(i.activity_id).then((function(t){e.$message({type:"success",message:"Deleted!"}),e.getActivity()}));case 1:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)}))},confirmActivity:function(){var t=this,e="Edit"===t.dialogType;if(!t.validateForm())return!1;e?Object(o["e"])(t.form.activity_id,t.form).then((function(e){t.dialogVisible=!1,t.getActivity(),t.successResponse()})).catch((function(e){var i=Object.entries(e.response.data.message),r=[];i.forEach((function(t){var e=Object.values(t[1]);e.length>0&&r.push({field:t[0],message:e[0]})})),t.errors=r})):Object(o["b"])(t.form).then((function(e){t.dialogVisible=!1,t.getActivity(),t.successResponse()})).catch((function(e){var i=Object.entries(e.response.data.message),r=[];i.forEach((function(t){var e=Object.values(t[1]);e.length>0&&r.push({field:t[0],message:e[0]})})),t.errors=r}))},successResponse:function(){var t=this.form,e=t.activity_no,i=t.activity_tgl;this.dialogVisible=!1,this.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n              <div>Number: ".concat(e,"</div>\n              <div>Date: ").concat(i,"</div>\n            "),type:"success"}),this.reset()},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,setTimeout((function(){e.getUser(t)}),500)):this.optionsUser=[]},selectUser:function(t){this.form.m_user_id=t},getErrorForField:function(t,e){var i=e.filter((function(e){return e.field===t}));if(i.length>0)return i[0].message}}},l=c,u=i("2877"),d=Object(u["a"])(l,r,a,!1,null,null,null);e["default"]=d.exports},ca41:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"b",(function(){return n})),i.d(e,"e",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return c}));var r=i("b775");function a(t){return Object(r["a"])({url:"/activity",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/activity",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"/activity/".concat(t),method:"put",data:e})}function s(t){return Object(r["a"])({url:"/activity/".concat(t),method:"delete"})}function c(t){return Object(r["a"])({url:"/activity/confirm/".concat(t),method:"put"})}}}]);